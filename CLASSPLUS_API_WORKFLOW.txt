================================================================================
CLASSPLUS API - DETAILED WORKFLOW & TECHNICAL DOCUMENTATION
================================================================================

This document provides technical details on how to extract and verify 
active organization codes from ClassPlus using the API infrastructure.

================================================================================
1. OVERVIEW OF CLASSPLUS ARCHITECTURE
================================================================================

ClassPlus uses a RESTful API structure with versioning:

Base URL:           https://api.classplusapp.com
API Version:        v2
Protocol:           HTTPS
Authentication:     Token-based (JWT)
Rate Limiting:      ~10-20 requests per second
Regional Focus:     India (IN)

API Endpoint Pattern:
  https://api.classplusapp.com/v2/{resource}/{id}?{query_params}

Example:
  https://api.classplusapp.com/v2/courses?tabCategoryId=1

================================================================================
2. COMPLETE WORKFLOW FOR ORGANIZATION EXTRACTION
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ORGANIZATION EXTRACTION WORKFLOW                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PHASE 1: DISCOVERY (Get Active Organizations)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Method A: Search Published Courses
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  
  Step 1: Query Published Courses Endpoint
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Endpoint:   GET /v2/course/search/published
    Parameters: limit=100, offset=0, sortBy=courseCreationDate, status=published
    Timeout:    10 seconds per request
    
    curl -X GET "https://api.classplusapp.com/v2/course/search/published?\
    limit=100&offset=0&sortBy=courseCreationDate&status=published" \
      -H "Accept: application/json" \
      -H "Api-Version: 51"
    
    Response:
    {
      "status": "success",
      "data": {
        "courses": [
          {
            "id": 12345,
            "name": "Course Name",
            "shareableLink": "https://ujaliaf.courses.store/course/12345",
            "orgId": 711528,
            ...
          },
          ...
        ]
      }
    }

  Step 2: Extract Organization Code from Shareable Link
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Parse URL: https://ORGCODE.courses.store/course/...
    Extract:   ORGCODE (e.g., "ujaliaf")
    
    Algorithm:
      1. Get shareableLink from response
      2. Split by '.' to get subdomain
      3. Extract first part as org code
      
      Example:
        URL: https://ujaliaf.courses.store/course/12345
        Code: ujaliaf

  Step 3: Verify Organization Code
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Call Organization Details Endpoint
    Endpoint: GET /v2/orgs/{org_code}
    
    curl -X GET "https://api.classplusapp.com/v2/orgs/ujaliaf" \
      -H "Api-Version: 51" \
      -H "region: IN"
    
    Response:
    {
      "status": "success",
      "data": {
        "orgId": 711528,
        "orgCode": "ujaliaf",
        "orgName": "Ujala Foundation",
        "orgLogoUrl": "...",
        ...
      }
    }

  Step 4: Repeat for Pagination
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    offset = 0, 100, 200, 300, 400 (5 pages Ã— 100 courses = 500 total)
    Continue until no more courses returned

Method B: Direct Organization Enumeration (Fallback)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  If Method A fails, try known organization patterns:
  
  Test Patterns:
    â€¢ test, demo, trial, sample
    â€¢ common org codes from cache
    â€¢ API directory endpoints (if available)
  
  For each pattern:
    GET /v2/orgs/{pattern}
    If response contains "data" â†’ Organization exists
    Record: org code, org name, org ID

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PHASE 2: USER SELECTION & AUTHENTICATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Step 1: User Selects Organization
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  From /cpactivorgs results, user picks an organization code
  Example: ujaliaf
  
  User sends: /cp
  Then inputs: ujaliaf*9876543210
              (org_code * mobile_number)

Step 2: Verify Organization Exists (Confirmation Check)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Endpoint: GET /v2/orgs/{org_code}
  
  If status 200 â†’ Organization valid, proceed
  If status 404 â†’ Organization not found, request new input
  If status error â†’ Retry or show error

Step 3: Generate OTP
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Endpoint:  POST /v2/otp/generate
  Method:    POST (form-urlencoded or JSON)
  Timeout:   10 seconds
  
  Headers Required:
    Accept: application/json, text/plain, */*
    Content-Type: application/json;charset=utf-8
    Api-Version: 51
    device-id: {random_uuid}
    region: IN
  
  Payload:
  {
    "countryExt": "91",
    "orgCode": "ujaliaf",
    "viaSms": "1",
    "mobile": "9876543210",
    "orgId": 711528,
    "otpCount": 0
  }
  
  Response Success (200):
  {
    "status": "success",
    "data": {
      "sessionId": "abc123def456",
      "message": "OTP sent to your registered mobile"
    }
  }
  
  Note: Session ID is required for next step

Step 4: User Enters OTP
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Bot asks: "Enter the OTP sent to your mobile"
  User provides: 6-digit or 4-digit OTP
  Timeout: 300 seconds (5 minutes)

Step 5: Verify OTP & Get Access Token
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Endpoint: POST /v2/users/verify
  Method:   POST
  
  Payload:
  {
    "otp": "123456",
    "countryExt": "91",
    "sessionId": "abc123def456",
    "orgId": 711528,
    "fingerprintId": "{random_uuid}",
    "mobile": "9876543210"
  }
  
  Possible Responses:
  
  âœ… Status 200 (Existing User):
     {
       "status": "success",
       "data": {
         "token": "eyJhbGciOiJIUzM4NCIs...",
         "user": {...},
         "message": "Login successful"
       }
     }
  
  âœ… Status 201 (New User - Registration Required):
     Proceed to registration (POST /v2/users/register)
     Similar to verification but includes user details
  
  âŒ Status 409 (Conflict - Needs Registration):
     New user account creation required
  
  âŒ Status 400/401 (Invalid OTP):
     Ask user to retry

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PHASE 3: FETCH COURSES & CONTENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Step 1: Get Available Courses
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Endpoint: GET /v2/courses?tabCategoryId=1
  
  Headers (Authenticated):
  {
    "x-access-token": "{token_from_verify}",
    "user-agent": "Mobile-Android",
    "app-version": "1.4.65.3",
    "api-version": "29",
    "device-id": "{random_uuid}"
  }
  
  Query Parameters:
    tabCategoryId: 1 (for main courses)
  
  Response:
  {
    "status": "success",
    "data": {
      "courses": [
        {
          "id": 12345,
          "name": "Mathematics - Advanced",
          "description": "...",
          "instructor": "Name",
          ...
        },
        ...
      ]
    }
  }

Step 2: User Selects Course
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Bot displays list of courses
  User selects by sending course number/ID

Step 3: Get Course Content Structure
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Endpoint: GET /v2/course/content/get
  
  Query Parameters:
    courseId: {course_id}
    folderId: 0 (for root content)
  
  Response:
  {
    "status": "success",
    "data": {
      "content": [
        {
          "id": "folder_1",
          "name": "Chapter 1",
          "type": "folder",
          "children": [...]
        },
        {
          "id": "video_1",
          "name": "Lesson 1 - Introduction",
          "type": "video",
          "videoUrl": "https://...",
          "thumbnail": "..."
        },
        ...
      ]
    }
  }

Step 4: Get Live Videos (if available)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Endpoint: GET /v2/course/live/list/videos
  
  Query Parameters:
    type: 2 (for recorded/live videos)
    entityId: {course_id}
    limit: 9999
    offset: 0
  
  Returns all video content with URLs

Step 5: Extract & Compile Content
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  For each content item:
    â€¢ Videos: Extract video URL + metadata
    â€¢ PDFs: Extract PDF download link
    â€¢ Folders: Recursively process children
    â€¢ Other: Collect media links
  
  Compile into structured file

================================================================================
3. DETAILED API ENDPOINT REFERENCE
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ENDPOINT SPECIFICATIONS                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. SEARCH PUBLISHED COURSES
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   
   Endpoint:  GET /v2/course/search/published
   Purpose:   Search for published courses (helps discover organizations)
   Auth:      None (public endpoint)
   
   Query Parameters:
     â€¢ limit       [int]     : Items per page (default: 100, max: 100)
     â€¢ offset      [int]     : Page offset (0, 100, 200, etc.)
     â€¢ sortBy      [string]  : courseCreationDate, popularity, rating
     â€¢ status      [string]  : "published" (for active courses only)
   
   Example:
     GET /v2/course/search/published?limit=100&offset=0&\
     sortBy=courseCreationDate&status=published
   
   Response Fields:
     â€¢ courses[].id              : Course ID
     â€¢ courses[].name            : Course name
     â€¢ courses[].shareableLink   : URL with org code (ujaliaf.courses.store/...)
     â€¢ courses[].description     : Course description
     â€¢ courses[].price           : Course price (if paid)
     â€¢ courses[].instructor      : Instructor name
   
   Use: Extract org codes from shareableLink field


2. GET ORGANIZATION DETAILS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   
   Endpoint:  GET /v2/orgs/{org_code}
   Purpose:   Get organization information and verify existence
   Auth:      None (public endpoint)
   
   Path Parameters:
     â€¢ org_code  [string]   : Organization code (e.g., "ujaliaf")
   
   Example:
     GET /v2/orgs/ujaliaf
   
   Response:
   {
     "status": "success",
     "data": {
       "orgId": 711528,
       "orgCode": "ujaliaf",
       "orgName": "Ujala Foundation",
       "orgLogoUrl": "https://...",
       "isVerified": true,
       "contactEmail": "contact@ujaliaf.org",
       "website": "https://ujaliaf.org"
     }
   }
   
   Status Codes:
     â€¢ 200  : Organization found and valid
     â€¢ 404  : Organization not found
     â€¢ 429  : Rate limited (too many requests)
     â€¢ 500  : Server error


3. GENERATE OTP FOR LOGIN
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   
   Endpoint:  POST /v2/otp/generate
   Purpose:   Send OTP to user's registered mobile number
   Auth:      None (requires valid org + mobile)
   
   Headers:
     Content-Type: application/json;charset=utf-8
     Api-Version: 51
     region: IN
   
   Body:
   {
     "countryExt": "91",           // Country code
     "orgCode": "ujaliaf",         // Organization code
     "viaSms": "1",                // Send via SMS (1=yes, 0=no)
     "mobile": "9876543210",       // Phone number (without country code)
     "orgId": 711528,              // Org ID (from GET /v2/orgs)
     "otpCount": 0                 // OTP attempt count
   }
   
   Response (Success):
   {
     "status": "success",
     "data": {
       "sessionId": "abc123def456xyz789",
       "message": "OTP sent successfully",
       "expiresIn": 600
     }
   }
   
   Response (Failure):
   {
     "status": "error",
     "message": "Invalid organization or mobile number"
   }
   
   Important: Save sessionId for next step


4. VERIFY OTP & LOGIN
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   
   Endpoint:  POST /v2/users/verify
   Purpose:   Verify OTP and get access token
   Auth:      None (requires valid sessionId + OTP)
   
   Body:
   {
     "otp": "123456",                        // 6-digit OTP
     "countryExt": "91",
     "sessionId": "abc123def456xyz789",      // From OTP generation
     "orgId": 711528,
     "fingerprintId": "{uuid_v4}",          // Random UUID
     "mobile": "9876543210"
   }
   
   Response (200 - Existing User):
   {
     "status": "success",
     "data": {
       "token": "eyJhbGciOiJIUzM4NCIsInR5cCI6IkpXVCJ9...",
       "userId": 1234567,
       "userName": "User Name",
       "email": "user@email.com",
       "message": "Login successful"
     }
   }
   
   Response (201 - New User Needs Registration):
     Proceed to POST /v2/users/register
   
   Response (409 - Conflict):
     User exists but registration needed
   
   Important: Store token for authenticated requests


5. GET AVAILABLE COURSES
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   
   Endpoint:  GET /v2/courses
   Purpose:   Get list of courses user has access to
   Auth:      Required (x-access-token)
   
   Query Parameters:
     â€¢ tabCategoryId  [int]  : Category filter (1=main courses)
   
   Example:
     GET /v2/courses?tabCategoryId=1
   
   Headers:
   {
     "x-access-token": "{token}",
     "user-agent": "Mobile-Android",
     "app-version": "1.4.65.3",
     "api-version": "29"
   }
   
   Response:
   {
     "status": "success",
     "data": {
       "courses": [
         {
           "id": 12345,
           "name": "Course Name",
           "description": "Description",
           "thumbnail": "url",
           "enrollmentStatus": "enrolled",
           "progress": 45
         },
         ...
       ]
     }
   }


6. GET COURSE CONTENT/MATERIALS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   
   Endpoint:  GET /v2/course/content/get
   Purpose:   Get all content (videos, PDFs, folders) of a course
   Auth:      Required (x-access-token)
   
   Query Parameters:
     â€¢ courseId   [int]  : Course ID (from GET /v2/courses)
     â€¢ folderId   [int]  : Folder ID (0 for root)
   
   Example:
     GET /v2/course/content/get?courseId=12345&folderId=0
   
   Response (Content Items):
   {
     "status": "success",
     "data": {
       "courseContent": [
         {
           "id": "item_1",
           "name": "Chapter 1",
           "type": "folder",
           "children": [
             {
               "id": "vid_1",
               "name": "Lesson 1",
               "type": "video",
               "videoUrl": "https://..."
             }
           ]
         },
         {
           "id": "pdf_1",
           "name": "Study Material",
           "type": "pdf",
           "pdfUrl": "https://..."
         }
       ]
     }
   }
   
   Types: folder, video, pdf, document, image, link


7. GET LIVE/RECORDED VIDEOS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   
   Endpoint:  GET /v2/course/live/list/videos
   Purpose:   Get all live/recorded video content
   Auth:      Required (x-access-token)
   
   Query Parameters:
     â€¢ type      [int]    : 2 (recorded videos)
     â€¢ entityId  [int]    : Course ID
     â€¢ limit     [int]    : 9999 (get all)
     â€¢ offset    [int]    : 0 (starting position)
   
   Example:
     GET /v2/course/live/list/videos?type=2&entityId=12345&limit=9999&offset=0
   
   Response:
   {
     "status": "success",
     "data": {
       "videos": [
         {
           "id": "vid_1",
           "title": "Video Title",
           "videoUrl": "https://...",
           "duration": 3600,
           "uploadDate": "2024-01-15"
         }
       ]
     }
   }

================================================================================
4. HEADER REQUIREMENTS BY ENDPOINT
================================================================================

Unauthenticated Endpoints:
  (/v2/orgs/{code}, /v2/course/search/published, /v2/otp/generate)
  
  Required Headers:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Header              â”‚ Value/Description                        â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ Accept              â”‚ application/json, text/plain, */*        â”‚
  â”‚ Content-Type        â”‚ application/json;charset=utf-8           â”‚
  â”‚ Api-Version         â”‚ 51                                       â”‚
  â”‚ region              â”‚ IN                                       â”‚
  â”‚ accept-language     â”‚ en                                       â”‚
  â”‚ device-id           â”‚ {random_uuid_v4}                         â”‚
  â”‚ user-agent          â”‚ Mobile-Android                           â”‚
  â”‚ app-version         â”‚ 1.4.65.3                                 â”‚
  â”‚ api-version         â”‚ 29                                       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Authenticated Endpoints:
  (/v2/courses, /v2/course/content/get, /v2/course/live/list/videos)
  
  Required Headers:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Header              â”‚ Value/Description                        â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ x-access-token      â”‚ {token_from_verify_response}             â”‚
  â”‚ user-agent          â”‚ Mobile-Android                           â”‚
  â”‚ app-version         â”‚ 1.4.65.3                                 â”‚
  â”‚ api-version         â”‚ 29                                       â”‚
  â”‚ device-id           â”‚ {random_uuid_v4}                         â”‚
  â”‚ Content-Type        â”‚ application/json;charset=utf-8           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
5. ERROR HANDLING & STATUS CODES
================================================================================

HTTP Status Codes:
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  200  âœ… Success          - Request completed successfully
  201  âœ… Created          - New resource created (user registration)
  202  â³ Accepted         - Request accepted, processing
  400  âŒ Bad Request      - Invalid parameters or malformed request
  401  âŒ Unauthorized     - Invalid or expired token
  403  âŒ Forbidden        - Access denied to resource
  404  âŒ Not Found        - Resource doesn't exist
  409  âš ï¸  Conflict         - User already exists or state conflict
  429  âš ï¸  Too Many Requests - Rate limit exceeded
  500  âŒ Server Error     - Internal server error
  502  âŒ Bad Gateway      - API gateway error
  503  âš ï¸  Unavailable     - Service temporarily unavailable

Common Error Responses:
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  
  Invalid OTP:
  {
    "status": "error",
    "message": "Invalid OTP",
    "code": "INVALID_OTP"
  }
  
  Organization Not Found:
  {
    "status": "error",
    "message": "Organization not found",
    "code": "ORG_NOT_FOUND"
  }
  
  Rate Limited:
  {
    "status": "error",
    "message": "Too many requests",
    "retryAfter": 60
  }

================================================================================
6. IMPLEMENTATION TIPS
================================================================================

âœ“ Always use CloudScraper to handle anti-bot protection
âœ“ Implement retry logic (exponential backoff) for rate limiting
âœ“ Cache organization codes to reduce API calls
âœ“ Use device-id rotation for multiple requests
âœ“ Set timeouts (10 seconds per request)
âœ“ Handle both JSON and form-urlencoded responses
âœ“ Validate all user inputs before sending to API
âœ“ Log all API requests for debugging
âœ“ Implement proper error messages for users
âœ“ Cache access tokens with expiry tracking
âœ“ Clean up temporary files after extraction
âœ“ Provide progress updates for long operations

Performance Optimization:
  â€¢ Parallel processing for course content
  â€¢ Connection pooling for multiple requests
  â€¢ Lazy loading of course materials
  â€¢ File streaming for large downloads
  â€¢ Batch operations where possible

================================================================================
7. SECURITY BEST PRACTICES
================================================================================

ğŸ” Data Protection:
  â€¢ Store tokens only temporarily
  â€¢ Clear sensitive data from memory
  â€¢ Use HTTPS for all connections
  â€¢ Validate SSL certificates
  â€¢ Implement rate limiting client-side

ğŸ“± Mobile Detection:
  â€¢ ClassPlus API detects mobile vs web clients
  â€¢ Always use user-agent: Mobile-Android
  â€¢ Randomize device-id for each new login
  â€¢ Avoid suspicious user-agent patterns

ğŸ›¡ï¸ Anti-Bot Measures:
  â€¢ Use CloudScraper library
  â€¢ Implement delays between requests
  â€¢ Rotate IP addresses if making bulk requests
  â€¢ Handle JavaScript-heavy pages
  â€¢ Respect robots.txt and terms of service

================================================================================
8. DEBUGGING & LOGGING
================================================================================

Essential Debug Information:
  1. Request URL and parameters
  2. Request/Response headers
  3. Request/Response body (mask tokens)
  4. HTTP status code
  5. Response time
  6. Error messages and codes
  7. Stack traces
  8. Device ID and Session ID

Example Log Entry:
  [2024-01-15 03:45:00] GET /v2/orgs/ujaliaf
  Status: 200
  Time: 145ms
  Response: orgId=711528, orgName="Ujala Foundation"

Monitoring:
  â€¢ Track failed API requests
  â€¢ Monitor rate limit responses
  â€¢ Alert on unexpected status codes
  â€¢ Log token expiry events
  â€¢ Track extraction success rates

================================================================================
END OF TECHNICAL DOCUMENTATION
================================================================================
